<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ุงุฎุชุจุงุฑ ุงูุฌูุงุฒ ุงููุฑูุฒู ููุชูุธูู ูุงูุฅุฏุงุฑุฉ</title>
    <style>
      body {
        font-family: "Arial", "Helvetica", sans-serif;
        text-align: center;
        background: #dededf;
        direction: rtl;
        margin: 0;
        padding: 0;
        min-height: 100vh;
      }
      .header {
        background: #777777;
        color: white;
        padding: 20px;
        text-align: center;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .header h1 {
        margin: 0;
        font-size: 24px;
        font-weight: bold;
      }
      .screen {
        display: none;
        padding: 28px;
        max-width: 800px;
        margin: 0 auto;
        background: white;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        margin-top: 20px;
        margin-bottom: 20px;
      }
      .active {
        display: block;
      }
      button {
        background: #3c3f41;
        color: white;
        border: none;
        padding: 12px 24px;
        font-size: 16px;
        cursor: pointer;
        border-radius: 6px;
        transition: background 0.3s;
        font-weight: bold;
      }
      button:hover {
        background: #1565c0;
      }
      button[disabled] {
        background: #ccc;
        cursor: not-allowed;
      }
      .countdown {
        font-size: 24px;
        color: #d32f2f;
        margin-bottom: 20px;
        font-weight: bold;
      }
      ul {
        list-style: none;
        padding: 0;
      }
      li {
        margin: 15px 0;
        font-size: 18px;
        background: #f5f5f5;
        padding: 10px;
        border-radius: 5px;
        border-left: 4px solid #1976d2;
      }
      .lang-row {
        display: flex;
        gap: 20px;
        justify-content: center;
        margin-top: 20px;
      }
      #timer {
        background: #fff3e0;
        padding: 10px;
        border-radius: 5px;
        font-size: 18px;
        color: #e65100;
        font-weight: bold;
        margin-bottom: 20px;
      }
      #questionContainer {
        text-align: right;
        margin-bottom: 20px;
      }
      #questionContainer p {
        font-size: 20px;
        font-weight: bold;
        margin-bottom: 15px;
      }
      #questionContainer label {
        display: block;
        font-size: 16px;
        cursor: pointer;
        padding: 8px;
        border-radius: 5px;
        transition: background 0.3s;
      }
      #questionContainer label:hover {
        background: #e3f2fd;
      }
      #questionContainer input[type="radio"] {
        margin-left: 10px;
      }
      .footer {
        text-align: center;
        background: #1565c0;
        color: white;
        position: fixed;
        bottom: 0;
        width: 100%;
        font-size: 14px;
      }
      p.title {
        background: #f3f3f3;
        color: blue;
        padding: 10px;
      }
      .results-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }
      .result-card {
        background: #fff;
        padding: 15px 20px;
        border-radius: 10px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        text-align: right;
        transition: transform 0.3s, box-shadow 0.3s;
      }
      .result-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
      }
      .result-card h3 {
        margin: 0 0 10px;
        font-size: 18px;
        color: #1565c0;
      }
      .progress-bar {
        background: #f1f1f1;
        border-radius: 10px;
        overflow: hidden;
        height: 20px;
        margin-top: 10px;
      }
      .progress {
        height: 100%;
        background: #4caf50;
        text-align: center;
        color: white;
        font-weight: bold;
        line-height: 20px;
      }
      .correct {
        color: #4caf50;
        font-weight: bold;
      }
      .wrong {
        color: #d32f2f;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <h1>ุงูุฌูุงุฒ ุงููุฑูุฒู ููุชูุธูู ูุงูุฅุฏุงุฑุฉ</h1>
      <p>ุงุฎุชุจุงุฑ ุงูุชูููู ุงูุดุงูู</p>
    </div>
    <!-- ุดุงุดุฉ ุงูุชุฑุญูุจ -->
    <section id="welcome" class="screen active">
      <h2>
        ูููุฏูู ุนูููุง ุจุฃููู ุนูู ูุดู ุงูุจุฏุก ูู ุงุฎุชุจุงุฑ ุงูุฌูุงุฒ ุงููุฑูุฒู ููุชูุธูู
        ูุงูุฅุฏุงุฑุฉ
      </h2>

      <button onclick="showSection('axes')">ูุชุงุจุนุฉ</button>
    </section>

    <!-- ุดุงุดุฉ ุนุฑุถ ุงููุญุงูุฑ -->
    <section id="axes" class="screen">
      <h2>ูุญุงูุฑ ุงูุงุฎุชุจุงุฑ</h2>
      <p class="title">
        <b style="color: red"> ูููุฏูู ุนููุงู ุจุงูุชุงูู</b> <br />
        ุชุฑุชูุจ ุงูุงูุชุญุงูุงุช ููุง ูู ููุถุญ ุจุงูุดูู ุงูุชุงูู ุจุฏุกุงู ุจูุญูุฑ ุงูุฌุฏุงุฑุงุช
        ุงูุณููููุฉ.<br />
        ุญูุธ ุงูุฅุฌุงุจุฉ ูุชู ุจุงุฎุชูุงุฑ ุฅุญุฏู ุงูุฅุฌุงุจุงุช ุซู ุงูุถุบุท ุนูู ุงูุชุงูู.
      </p>
      <div style="text-align: center; margin-bottom: 20px">
        <div style="display: inline-block; margin-right: 20px">
          <span
            style="
              display: inline-block;
              width: 20px;
              height: 20px;
              background-color: #ccc;
              border-radius: 50%;
            "
          ></span>
          <span style="margin-left: 10px">ุบูุฑ ูุชูุนู</span>
        </div>
        <div style="display: inline-block">
          <span
            style="
              display: inline-block;
              width: 20px;
              height: 20px;
              background-color: #4caf50;
              border-radius: 50%;
            "
          ></span>
          <span style="margin-left: 10px">ูุชูุนู</span>
        </div>
        <p style="font-size: 14px; color: #666; margin-top: 10px">
          ุงููุญูุฑ ุงููุชูุนู ูููู ูููู ุฃุฎุถุฑ ูุงููุญูุฑ ุงููู ูุด ูุชูุนู ูููู ูููู ูุทูู
        </p>
      </div>
      <div
        style="
          display: flex;
          justify-content: space-around;
          flex-wrap: wrap;
          gap: 20px;
        "
      >
        <div style="text-align: center; flex: 1; min-width: 150px; opacity: 1">
          <div style="font-size: 48px">๐ง</div>
          <div style="font-weight: bold">ุงูููุงูุงุช ุงูุณููููุฉ ูุงูููุณูุฉ</div>
          <div style="font-size: 14px; color: #666">
            (ูููุณ ุงูููุงุฑุงุช ุงูุณููููุฉ ูุงูููุณูุฉ)
          </div>
          <div style="font-size: 14px">ูกูคูฉ ุณุคุงู</div>
        </div>
        <div
          style="text-align: center; flex: 1; min-width: 150px; opacity: 0.5"
        >
          <div style="font-size: 48px">๐</div>
          <div style="font-weight: bold">ุงูููุงูุงุช ุงููุบููุฉ</div>
          <div style="font-size: 14px; color: #666">
            (ูููุณ ุงูููุงุฑุงุช ุงููุบููุฉ ุจุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ)
          </div>
          <div style="font-size: 14px">ูขู ุณุคุงู</div>
        </div>
        <div
          style="text-align: center; flex: 1; min-width: 150px; opacity: 0.5"
        >
          <div style="font-size: 48px">๐ป</div>
          <div style="font-weight: bold">ุงูููุงูุงุช ุงููุนุฑููุฉ ูุงูุชูููููุฌูุฉ</div>
          <div style="font-size: 14px; color: #666">
            (ูููุณ ุงููุนุฑูุฉ ุงูุนุงูุฉ ูุงูุชูููููุฌูุง)
          </div>
          <div style="font-size: 14px">ูขู ุณุคุงู</div>
        </div>
        <div
          style="text-align: center; flex: 1; min-width: 150px; opacity: 0.5"
        >
          <div style="font-size: 48px">๐จโ๐ซ</div>
          <div style="font-weight: bold">ุงูููุงูุงุช ุงูุชุฑุจููุฉ</div>
          <div style="font-size: 14px; color: #666">
            (ูููุณ ุงูููุงุฑุงุช ุงูุชุฑุจููุฉ)
          </div>
          <div style="font-size: 14px">ูคูฅ ุฃุณุฆูุฉ</div>
        </div>
        <div
          style="text-align: center; flex: 1; min-width: 150px; opacity: 0.5"
        >
          <div style="font-size: 48px">๐ฏ</div>
          <div style="font-weight: bold">ููุงูุงุช ุงูุชุฎุตุต</div>
          <div style="font-size: 14px; color: #666">
            (ูููุณ ุงูููุงุฑุงุช ุงููุชุฎุตุตุฉ)
          </div>
          <div style="font-size: 14px">ูคู ุฃุณุฆูุฉ</div>
        </div>
      </div>
      <button onclick="startExam()">ุงุจุฏุฃ ุฃูู ูุญูุฑ</button>
    </section>

    <!-- ุดุงุดุฉ ุชุนุฑูู ุงููุฏุฑุงุช ุงููุธูููุฉ -->
    <section id="functionalIntro" class="screen">
      <h2>ุชุนุฑูู ุงููุฏุฑุงุช ุงููุธูููุฉ</h2>
      <p>
        ูุฐุง ุงูุงุฎุชุจุงุฑ ูููุณ ูุฏุฑุงุชู ูู ุญู ุงููุดููุงุช ูุงูุชุฎุทูุท ูุงูุชุนุงูู ูู ุจูุฆุฉ ุงูุนูู.
      </p>
      <button onclick="startFunctionalExam()">ุงุจุฏุฃ ุงูุงุฎุชุจุงุฑ</button>
    </section>

    <!-- ุดุงุดุฉ ุชุนุฑูู ุงูุฃูููู ุฃุดูุงู -->
    <section id="iqShapesIntro" class="screen">
      <h2>ุชุนุฑูู ุงูุฃูููู ุฃุดูุงู</h2>
      <p>ูุฐุง ุงูุงุฎุชุจุงุฑ ูููุณ ุฐูุงุกู ูู ุฎูุงู ุฃุณุฆูุฉ ุงูุฃุดูุงู ูุงูุฃููุงุท ุงูููุทููุฉ.</p>
      <button onclick="startIqShapesExam()">ุงุจุฏุฃ ุงูุงุฎุชุจุงุฑ</button>
    </section>

    <!-- ุดุงุดุฉ ุงุฎุชูุงุฑ ุงููุบุฉ -->
    <section id="languageSelect" class="screen">
      <h2 id="langTitle">ุงุฎุชุฑ ุงูุงุฎุชุจุงุฑ ุงูุฐู ุณุชุจุฏุฃ ุจู</h2>
      <p id="langNote"></p>
      <div class="lang-row">
        <button id="btn-ar" onclick="chooseLanguage('ar')">ุงูุนุฑุจูุฉ</button>
        <button id="btn-en" onclick="chooseLanguage('en')">English</button>
      </div>
    </section>

    <!-- ุดุงุดุฉ ุงูุงุฎุชุจุงุฑ -->
    <section id="examScreen" class="screen">
      <h2 id="examTitle"></h2>
      <div id="timer">ุงูููุช ุงููุชุจูู: <span id="timeLeft">5:00</span></div>
      <div id="questionContainer"></div>
      <button id="nextBtn" onclick="nextQuestion()">ุงูุชุงูู</button>
    </section>

    <!-- ุดุงุดุฉ ุงูุงุณุชุฑุงุญุฉ -->
    <section id="breakScreen" class="screen">
      <h2 id="nextAxisTitle">ุงุณุชุนุฏ ูููุญูุฑ ุงููุงุฏู</h2>
      <div class="countdown">ูุจุฏุฃ ุฎูุงู <span id="countdown">5</span> ุซูุงูู</div>
      <button onclick="skipBreak()">ุงุจุฏุฃ ุงูุขู</button>
    </section>

    <!-- ุดุงุดุฉ ุงูููุงูุฉ -->
    <section id="endScreen" class="screen">
      <h2>ุงูุชููุช ูู ุฌููุน ุงููุญุงูุฑ โ</h2>
      <button onclick="showResults()">ุนุฑุถ ุงููุชูุฌุฉ</button>
      <button onclick="location.reload()">ุชุณุฌูู ุงูุฎุฑูุฌ</button>
    </section>

    <!-- ุดุงุดุฉ ุงููุชุงุฆุฌ -->
    <section id="resultsScreen" class="screen">
      <h2>ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ</h2>
      <div id="resultsContent" class="results-grid"></div>
      <button onclick="showSection('endScreen')">ุงูุนูุฏุฉ</button>
    </section>

    <script>
      const screens = document.querySelectorAll(".screen");
      const axes = [
        {
          key: "behavioral_psychological",
          label: "ุงูููุงูุงุช ุงูุณููููุฉ ูุงูููุณูุฉ",
          subAxes: [
            { key: "behavioral", label: "ุงูุฌุฏุงุฑุงุช ุงูุณููููุฉ" },
            { key: "functional", label: "ุงููุฏุฑุงุช ุงููุธูููุฉ" },
            { key: "iq_shapes", label: "ุงูุฃูููู ุฃุดูุงู" },
          ],
        },
        { key: "linguistic", label: "ุงูููุงูุงุช ุงููุบููุฉ" },
        {
          key: "cognitive_tech",
          label: "ุงูููุงูุงุช ุงููุนุฑููุฉ ูุงูุชูููููุฌูุฉ",
          subAxes: [
            { key: "cognitive", label: "ุงููุนูููุงุช ุงูุนุงูุฉ" },
            { key: "tech", label: "ุงูุญุงุณุจ ุงูุขูู" },
          ],
        },
        { key: "pedagogic", label: "ุงูููุงูุงุช ุงูุชุฑุจููุฉ" },
        { key: "specialization", label: "ููุงูุงุช ุงูุชุฎุตุต" },
      ];

      // real questions
      const QUESTIONS = {
        behavioral: [
          {
            q: "ูู ุฃูุช ุดุฎุต ูุญุจูุจ ูู ุนุงุฆูุชูุ",
            a: ["ุฃูุงูู ุจุดุฏุฉ", "ุฃูุงูู", "ูุญุงูุฏ", "ูุง ุฃูุงูู", "ูุง ุฃูุงูู ุจุดุฏุฉ"],
            c: 0,
          },
          {
            q: "ูู ุฃูุช ุดุฎุต ุดุฌุงุนุ",
            a: ["ุฃูุงูู ุจุดุฏุฉ", "ุฃูุงูู", "ูุญุงูุฏ", "ูุง ุฃูุงูู", "ูุง ุฃูุงูู ุจุดุฏุฉ"],
            c: 0,
          },
          {
            q: "ูู ุชุณุชูุน ูุขุฑุงุก ุฃุตุฏูุงุฆูุ",
            a: ["ุฃูุงูู ุจุดุฏุฉ", "ุฃูุงูู", "ูุญุงูุฏ", "ูุง ุฃูุงูู", "ูุง ุฃูุงูู ุจุดุฏุฉ"],
            c: 0,
          },
          {
            q: "ูู ุชุดุนุฑ ุจุงููุฎุฑ ุจููุณูุ",
            a: ["ุฃูุงูู ุจุดุฏุฉ", "ุฃูุงูู", "ูุญุงูุฏ", "ูุง ุฃูุงูู", "ูุง ุฃูุงูู ุจุดุฏุฉ"],
            c: 0,
          },
          {
            q: "ูู ุฃูุช ููุชุฒู ุจููุงุนูุฏูุ",
            a: ["ุฃูุงูู ุจุดุฏุฉ", "ุฃูุงูู", "ูุญุงูุฏ", "ูุง ุฃูุงูู", "ูุง ุฃูุงูู ุจุดุฏุฉ"],
            c: 0,
          },
        ],
        linguistic_ar: [
          {
            q: "ูุง ูู ุงููุฑู ุจูู 'ุฃูู' ู 'ุฃููุช'ุ",
            a: [
              "ุงููุงุถู ูุงููุถุงุฑุน",
              "ุงูุฌูุน ูุงูููุฑุฏ",
              "ุงูุฐูุฑ ูุงูุฃูุซู",
              "ุงููุนู ูุงูุงุณู",
            ],
            c: 0,
          },
          {
            q: "ุฃู ูู ุงูุฌูู ุงูุชุงููุฉ ุตุญูุญุฉ ูุญููุงูุ",
            a: [
              "ุฐูุจ ุงูุทุงูุจ ุฅูู ุงููุฏุฑุณุฉ",
              "ุฐูุจุช ุงูุทุงูุจุฉ ุฅูู ุงููุฏุฑุณุฉ",
              "ุฐูุจ ุงูุทุงูุจุงุช ุฅูู ุงููุฏุฑุณุฉ",
              "ุฐูุจ ุงูุทูุงุจ ุฅูู ุงููุฏุฑุณุฉ",
            ],
            c: 0,
          },
          {
            q: "ูุง ูู ุงูุฅุนุฑุงุจ ุงูุตุญูุญ ููููุฉ 'ุงููุชุงุจ' ูู 'ูุฑุฃุช ุงููุชุงุจ'ุ",
            a: ["ุงูููุนูู ุจู", "ุงููุงุนู", "ุงููุจุชุฏุฃ", "ุงูุฎุจุฑ"],
            c: 0,
          },
          {
            q: "ุฃู ูููุฉ ูุฑุงุฏูุฉ ูู 'ุฌููู'ุ",
            a: ["ูุจูุญ", "ุญุณู", "ุณูุก", "ุฑุฏูุก"],
            c: 1,
          },
          {
            q: "ูุง ูู ููุน ุงูุฌููุฉ 'ูุง ุชุฐูุจ ุฅูู ููุงู'ุ",
            a: ["ุงูุฃูุฑ", "ุงูุฎุจุฑ", "ุงูุงุณุชููุงู", "ุงูุชููู"],
            c: 0,
          },
        ],
        linguistic_en: [
          {
            q: "What is the past tense of 'go'?",
            a: ["Goes", "Going", "Went", "Gone"],
            c: 2,
          },
          {
            q: "Which sentence is grammatically correct?",
            a: [
              "She go to school",
              "She goes to school",
              "She going to school",
              "She went to school",
            ],
            c: 1,
          },
          {
            q: "What is a synonym for 'happy'?",
            a: ["Sad", "Joyful", "Angry", "Tired"],
            c: 1,
          },
          {
            q: "What type of word is 'quickly'?",
            a: ["Noun", "Verb", "Adverb", "Adjective"],
            c: 2,
          },
          {
            q: "Complete the sentence: 'I ___ a book yesterday.'",
            a: ["Read", "Reads", "Reading", "Will read"],
            c: 0,
          },
        ],
        cognitive: [
          {
            q: "ูุง ูู ุนุงุตูุฉ ูุตุฑุ",
            a: ["ุงููุงูุฑุฉ", "ุงูุฅุณููุฏุฑูุฉ", "ุฃุณูุงู", "ุงูุฌูุฒุฉ"],
            c: 0,
          },
          {
            q: "ูู ูู ูุคุณุณ ุงูุฏููุฉ ุงูุนุซูุงููุฉุ",
            a: ["ุนุซูุงู ุงูุฃูู", "ูุญูุฏ ุงููุงุชุญ", "ุณูููุงู ุงููุงูููู", "ุฃูุฑุฎุงู"],
            c: 0,
          },
          {
            q: "ูุง ูู ุฃูุจุฑ ูููุจ ูู ุงููุฌููุนุฉ ุงูุดูุณูุฉุ",
            a: ["ุงูุฃุฑุถ", "ุงููุดุชุฑู", "ุฒุญู", "ุงููุฑูุฎ"],
            c: 1,
          },
          {
            q: "ูู ุฃู ุนุงู ููุนุช ุซูุฑุฉ 25 ููุงูุฑุ",
            a: ["2010", "2011", "2012", "2013"],
            c: 1,
          },
          {
            q: "ูุง ูู ุงุณู ุงูููุฑ ุงูุฐู ููุฑ ุจูุตุฑุ",
            a: ["ุงูููู", "ุงููุฑุงุช", "ุงูุฏุฌูุฉ", "ุงูุฃุฑุฏู"],
            c: 0,
          },
        ],
        tech_ar: [
          {
            q: "ูุง ูู ุจุฑูุงูุฌ ูุนุงูุฌ ุงููุตูุต ุงูุฃุณุงุณู ูู Microsoft Officeุ",
            a: ["Word", "Excel", "PowerPoint", "Access"],
            c: 0,
          },
          {
            q: "ูุง ูู ุงุฎุชุตุงุฑ CPUุ",
            a: [
              "Central Processing Unit",
              "Computer Personal Unit",
              "Control Processing Unit",
              "Central Power Unit",
            ],
            c: 0,
          },
          {
            q: "ููู ุชุญูุธ ููู ูู ุจุฑูุงูุฌ Wordุ",
            a: ["Ctrl + S", "Ctrl + P", "Ctrl + C", "Ctrl + V"],
            c: 0,
          },
          {
            q: "ูุง ูู ูุธุงู ุงูุชุดุบูู ุงูุฃูุซุฑ ุงุณุชุฎุฏุงูุงูุ",
            a: ["Windows", "Linux", "macOS", "Android"],
            c: 0,
          },
          {
            q: "ูุง ูู ุงููุฑู ุจูู ุงูุฅูุชุฑูุช ูุงูููุจุ",
            a: [
              "ุงูุฅูุชุฑูุช ูู ุงูุดุจูุฉุ ุงูููุจ ูู ุงูุฎุฏูุงุช",
              "ููุณ ุงูุดูุก",
              "ุงูููุจ ุฃุณุฑุน",
              "ุงูุฅูุชุฑูุช ุฃูุฏู",
            ],
            c: 0,
          },
        ],
        tech_en: [
          {
            q: "What does CPU stand for?",
            a: [
              "Central Processing Unit",
              "Computer Personal Unit",
              "Control Processing Unit",
              "Central Power Unit",
            ],
            c: 0,
          },
          {
            q: "Which is the most used operating system?",
            a: ["Windows", "Linux", "macOS", "Android"],
            c: 0,
          },
          {
            q: "How to save a file in Word?",
            a: ["Ctrl + S", "Ctrl + P", "Ctrl + C", "Ctrl + V"],
            c: 0,
          },
          {
            q: "What is the difference between Internet and Web?",
            a: [
              "Internet is the network, Web is the services",
              "Same thing",
              "Web is faster",
              "Internet is older",
            ],
            c: 0,
          },
          {
            q: "What is a browser?",
            a: [
              "Software to access web",
              "Hardware device",
              "Operating system",
              "Programming language",
            ],
            c: 0,
          },
        ],
        pedagogic: [
          {
            q: "ุฅูุงุจุฉ ุงููุนูู ูููุชุนูู ุนูุฏ ุญุฏูุซ ุงูุงุณุชุฌุงุจุฉ ...",
            a: [
              "ุชููู ูู ุงูุงุณุชุฌุงุจุฉ ุงููุชุนููุฉ",
              "ููุณ ููุง ุชุฃุซูุฑ ุนูู ุงูุงุณุชุฌุงุจุฉ",
              "ุชุคุซุฑ ุนูู ุฐุงูุฑุฉ ุงููุชุนูู",
              "ุชููู ุฏุงูุนูุฉ ุงููุชุนูู",
            ],
            c: 3,
          },
          {
            q: "ูุฌููุนุฉ ูุนูููุงุช ุฑุงุฌุนุฉุ ุดูููุฉ ุฃู ุบูุฑ ุดูููุฉุ ุชุณูุญ ููุฑุณููุง ุฃู ูุนุฑู ุฃู ุฑุณุงูุชู ูุฏ ุงุณุชูุจูุชุ ูููู ุชู ููููุง ...",
            a: ["ุงูุชุบุฐูุฉ ุงูุฑุงุฌุนุฉ", "ุงูุชุนุฒูุฒ", "ุงูุฏุงูุนูุฉ", "ุงูุชุญููุฒ"],
            c: 0,
          },
          {
            q: "ูุฎุชูู ุงูุงุชุตุงู ุงููุฏูู ุนู ุงูุงุชุตุงู ุงูุฌุฏูุฏ ุจุฅุถุงูุฉ ุนูุตุฑ ...",
            a: ["ุงููุฑุณู", "ุงูุชุบุฐูุฉ ุงูุฑุงุฌุนุฉ", "ุงููุณุชูุจู", "ููุงุฉ ุงูุงุชุตุงู"],
            c: 1,
          },
          {
            q: "ุงูุชุบุฐูุฉ ุงูุฑุงุฌุนุฉ ุงูุชู ุชูุฏู ููุทุงูุจ ูู ุตูุฑุฉ ุฎุทูุฉ ูู ุงูุชุบุฐูุฉ ...",
            a: ["ุฃููุงุนูุง", "ุงูุฑุงุฌุนุฉ ุงููููุฉ", "ุงูููุธูุฉ", "ุงูุฏุงุฎููุฉ", "ุงูููุชูุจุฉ"],
            c: 4,
          },
          {
            q: "ุงููุนูููุงุช ุงูุชู ูุชููุงูุง ุงููุชุนูู ุญูู ุงุณุชุฌุงุจุชู ุงูุตุญูุญุฉ ูู ุงูุชุบุฐูุฉ ุงูุฑุงุฌุนุฉ ...",
            a: ["ุงููุญุงูุฏุฉ", "ุงูุณูุจูุฉ", "ุงูุฅูุฌุงุจูุฉ", "ุงูุฑูุฒูุฉ"],
            c: 2,
          },
        ],
        specialization: [
          {
            q: "ูุง ูู ุงูุงุฎุชุตุงุต ุงูุฑุฆูุณู ููุฌูุงุฒ ุงููุฑูุฒูุ",
            a: ["ุงูุชูุธูู ูุงูุฅุฏุงุฑุฉ", "ุงูุชุนููู", "ุงูุตุญุฉ", "ุงูุฃูู"],
            c: 0,
          },
          {
            q: "ููู ูุชู ุชูููู ุงูุฃุฏุงุก ูู ุงูุฌูุงุฒุ",
            a: ["ุจุงููุนุงููุฑ ุงููุญุฏุฏุฉ", "ุนุดูุงุฆูุงู", "ุจุงูุฑุฃู ุงูุดุฎุตู", "ุบูุฑ ูููู"],
            c: 0,
          },
          {
            q: "ูุง ูู ุฃูููุฉ ุงูุชุฏุฑูุจ ูู ุงูุฌูุงุฒุ",
            a: ["ุชุทููุฑ ุงูููุงุฑุงุช", "ุฅูุฏุงุฑ ุงูููุงุฑุฏ", "ุบูุฑ ููู", "ูุณุจุจ ุงูุชุนุจ"],
            c: 0,
          },
          {
            q: "ููู ุชุชุนุงูู ูุน ุงูุดูุงูู ูู ุงูุนููุ",
            a: ["ุจุงูุชุญููู ูุงูุญู", "ุจุงูุชุฌุงูู", "ุจุงูุนูุงุจ", "ุจุงูุฅููุงู"],
            c: 0,
          },
          {
            q: "ูุง ูู ุฏูุฑ ุงูุฅุฏุงุฑุฉ ูู ุงูุฌูุงุฒุ",
            a: ["ุชูุธูู ุงูุนูููุงุช", "ุงูุชูููุฐ ุงููุจุงุดุฑ", "ุงูุชุฑููู", "ุงููุงููุฉ ููุท"],
            c: 0,
          },
        ],
        functional: [
          {
            q: "ูุง ูู ุงูููุงุฑุฉ ุงูุฃุณุงุณูุฉ ูุญู ุงููุดููุงุช ูู ุงูุนููุ",
            a: [
              "ุงูุชุญููู ูุงูุชูููุฑ ุงูููุฏู",
              "ุงูุณุฑุนุฉ ูู ุงูุชูููุฐ",
              "ุงูุงุนุชูุงุฏ ุนูู ุงูุขุฎุฑูู",
              "ุงูุชุฌุงูู",
            ],
            c: 0,
          },
          {
            q: "ููู ุชุชุนุงูู ูุน ูุดุฑูุน ูุชุนุฏุฏ ุงูููุงูุ",
            a: [
              "ุจุชูุธูู ุงูุฃููููุงุช",
              "ุจุงูุนูู ุนูู ูู ุดูุก ูุนุงู",
              "ุจุงูุชุฃุฌูู",
              "ุจุงูุฅููุงู",
            ],
            c: 0,
          },
          {
            q: "ูุง ูู ุฏูุฑ ุงูุชุฎุทูุท ูู ุงููุฌุงุญ ุงููุธูููุ",
            a: [
              "ููุฌู ุงูุฌููุฏ ูุญู ุงููุฏู",
              "ูุณุจุจ ุงูุชุฃุฎูุฑ",
              "ุบูุฑ ุถุฑูุฑู",
              "ูููู ุงูุฅูุชุงุฌูุฉ",
            ],
            c: 0,
          },
          {
            q: "ููู ุชุชุนุงูู ูุน ุชุบููุฑ ูู ุงูููุงูุ",
            a: ["ุจุงูุชููู ูุงูุชุนูู", "ุจุงูุฑูุถ", "ุจุงูุงุณุชุณูุงู", "ุจุงูุชุฌุงูู"],
            c: 0,
          },
          {
            q: "ูุง ูู ุฃูููุฉ ุงูุชุนุงูู ูู ุงููุฑููุ",
            a: ["ูุญุณู ุงููุชุงุฆุฌ", "ูุณุจุจ ุงูุฎูุงูุงุช", "ุบูุฑ ููู", "ูููู ุงูุฅูุชุงุฌูุฉ"],
            c: 0,
          },
        ],
        iq_shapes: [
          {
            q: "ูุฐุง ุณุคุงู ุชุฌุฑูุจู ูุดุฑุญ ููุฑุฉ ุงุฎุชุจุงุฑ ุงูุฃูููู ุงูุฃุดูุงู. ุงูุฃูููู ูู ูููุงุณ ููุฐูุงุกุ ููู ูุฐุง ุงูุงุฎุชุจุงุฑุ ุณุชุฌุฏ ุฃุณุฆูุฉ ุชุชุทูุจ ููู ุงูุชุดุงู ุงูุฃููุงุท ูุงูุนูุงูุงุช ุจูู ุงูุฃุดูุงู ุฃู ุงูุฃุฑูุงู. ุนูู ุณุจูู ุงููุซุงูุ ูู ุงูุณูุณูุฉ: ุฏุงุฆุฑุฉุ ูุฑุจุนุ ูุซูุซุ ูุง ูู ุงูุดูู ุงูุชุงููุ ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ ูู: ูุฌูุฉ.<br><br>ูู ูุฐุง ุงูุณุคุงู ุงูุชุฌุฑูุจูุ ุงุฎุชุฑ ุงูุฅุฌุงุจุฉ ุฑูู 1 ููุซุงู.<br><br><img src='ุงูุงูููู/5796570498312375410.jpg' alt='ุณุคุงู ุชุฌุฑูุจู' style='max-width:100%; height:auto;'>",
            a: ["1", "2", "3", "4"],
            c: 0,
          },
          {
            q: "<img src='ุงูุงูููู/5796570498312375411.jpg' alt='ุณุคุงู 1' style='max-width:100%; height:auto;'>",
            a: ["1", "2", "3", "4"],
            c: 0,
          },
          {
            q: "<img src='ุงูุงูููู/5796570498312375481.jpg' alt='ุณุคุงู 2' style='max-width:100%; height:auto;'>",
            a: ["1", "2", "3", "4"],
            c: 0,
          },
          {
            q: "<img src='ุงูุงูููู/5798822298126060318.jpg' alt='ุณุคุงู 3' style='max-width:100%; height:auto;'>",
            a: ["1", "2", "3", "4"],
            c: 0,
          },
        ],
      };

      let currentAxisIndex = 0;
      let currentSubAxisIndex = 0;
      let currentLang = null; // 'ar' or 'en'
      let currentAxisKey = null; // 'linguistic' or 'tech' for language selects
      let axisLangDone = {
        linguistic: { ar: false, en: false },
        cognitive_tech: { ar: false, en: false },
      }; // track per-axis per-lang
      let axisDone = {}; // axis.key => true when fully done
      let currentQuestions = [];
      let currentQuestionIndex = 0;
      let timerInterval = null; // for axis timer
      let timeLeft = 300; // 5 minutes in seconds
      let breakInterval = null; // for break countdown
      let userAnswers = {};

      // Define skipBreak globally to avoid reference errors
      window.skipBreak = function () {
        if (breakInterval) {
          clearInterval(breakInterval);
          breakInterval = null;
        }
        startAxis();
      };

      function startTimer() {
        timeLeft = 300; // reset to 5 minutes
        updateTimerDisplay();
        timerInterval = setInterval(() => {
          timeLeft--;
          updateTimerDisplay();
          if (timeLeft <= 0) {
            stopTimer();
            finishCurrent(); // auto-finish when time is up
          }
        }, 1000);
      }

      function stopTimer() {
        if (timerInterval) {
          clearInterval(timerInterval);
          timerInterval = null;
        }
      }

      function updateTimerDisplay() {
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        document.getElementById("timeLeft").textContent = `${minutes}:${seconds
          .toString()
          .padStart(2, "0")}`;
      }

      function showSection(id) {
        screens.forEach((s) => s.classList.remove("active"));
        document.getElementById(id).classList.add("active");
      }

      function startExam() {
        currentAxisIndex = 0;
        startAxis();
      }

      function startAxis() {
        const axis = axes[currentAxisIndex];
        if (!axis) return showSection("endScreen");

        // if axis already done (shouldn't happen in normal flow) skip
        if (axisDone[axis.key]) {
          currentAxisIndex++;
          currentSubAxisIndex = 0;
          return startAxis();
        }

        // linguistic special flow: require both languages, enable only not-done languages
        if (axis.key === "linguistic") {
          setupLanguageSelectForAxis("linguistic");
          return;
        }

        // tech special flow: choose one language, after finishing it, consider axis done (do not return to lang select)
        if (axis.key === "tech") {
          setupLanguageSelectForAxis("tech");
          return;
        }

        // if axis has subAxes, start with first subAxis
        if (axis.subAxes && axis.subAxes.length > 0) {
          const subAxis = axis.subAxes[currentSubAxisIndex];
          if (subAxis.key === "functional") {
            showSection("functionalIntro");
            return;
          } else if (subAxis.key === "iq_shapes") {
            showSection("iqShapesIntro");
            return;
          } else if (subAxis.key === "tech") {
            setupLanguageSelectForAxis("tech");
            return;
          } else {
            loadQuestionsForAxis(subAxis.key);
            showSection("examScreen");
            return;
          }
        }

        // default axes: load questions and show
        loadQuestionsForAxis(axis.key);
        showSection("examScreen");
      }

      function setupLanguageSelectForAxis(axisKey) {
        currentLang = null;
        currentAxisKey = axisKey; // set currentAxisKey
        // update title
        const axis = axes[currentAxisIndex];
        let title = "ุงุฎุชุฑ ุงูุงุฎุชุจุงุฑ ุงูุฐู ุณุชุจุฏุฃ ุจู  - " + axis.label;
        if (axisKey === "tech") {
          title = "ุงุฎุชุฑ ุงููุบุฉ - ุงูููุงูุงุช ุงูุชูููููุฌูุฉ";
        }
        document.getElementById("langTitle").textContent = title;
        // update note for tech axis
        const noteEl = document.getElementById("langNote");
        if (axisKey === "tech") {
          noteEl.textContent =
            "ุฅุฐุง ุงุฎุชุฑุช ุงูุนุฑุจูุฉ ุณูููู ุงูุงุฎุชุจุงุฑ ุจุงูุนุฑุจูุ ุงูุง ุฅุฐุง ุงุฎุชุฑุช English ุณูููู ุงูุงุฎุชุจุงุฑ ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ";
        } else {
          noteEl.textContent = "";
        }
        // enable/disable buttons based on axisLangDone
        const btnAr = document.getElementById("btn-ar");
        const btnEn = document.getElementById("btn-en");

        if (axisKey === "linguistic") {
          btnAr.disabled = axisLangDone.linguistic.ar;
          btnEn.disabled = axisLangDone.linguistic.en;
        } else if (axisKey === "tech") {
          // for tech: allow either language only if axis not done
          const doneBoth =
            axisLangDone.cognitive_tech.ar || axisLangDone.cognitive_tech.en; // if one done, treat axis as done
          btnAr.disabled = doneBoth;
          btnEn.disabled = doneBoth;
        }

        showSection("languageSelect");
      }

      function chooseLanguage(lang) {
        const axis = axes[currentAxisIndex];
        currentLang = lang;
        // prepare question key
        const qKey =
          currentAxisKey === "linguistic"
            ? `linguistic_${lang}`
            : currentAxisKey === "tech"
            ? `tech_${lang}`
            : `${axis.key}_${lang}`;
        // for tech and linguistic we built keys accordingly
        // load questions
        loadQuestionsForAxis(qKey);
        showSection("examScreen");
      }

      function loadQuestionsForAxis(key) {
        // key for QUESTIONS: for normal axes use axis.key, for language axes use linguistic_ar etc.
        currentQuestions =
          QUESTIONS[key] || QUESTIONS[axes[currentAxisIndex].key] || [];
        currentQuestionIndex = 0;
        renderQuestion();
        // set exam title
        const axis = axes[currentAxisIndex];
        let title;
        if (axis.subAxes && axis.subAxes[currentSubAxisIndex]) {
          title = axis.subAxes[currentSubAxisIndex].label;
        } else {
          title = axis.label;
          if (currentLang)
            title += " - " + (currentLang === "ar" ? "ุนุฑุจู" : "English");
        }
        document.getElementById("examTitle").textContent = title;
        // start timer
        startTimer();
      }

      function renderQuestion() {
        const container = document.getElementById("questionContainer");
        if (!currentQuestions.length) {
          container.innerHTML = "<p>ูุง ุชูุฌุฏ ุฃุณุฆูุฉ ููุฐุง ุงููุญูุฑ.</p>";
          return;
        }
        const q = currentQuestions[currentQuestionIndex];
        container.innerHTML =
          `<p>${q.q}</p>` +
          q.a
            .map(
              (ans, i) =>
                `<div><label><input name='ans' type='radio'/> ${ans}</label></div>`
            )
            .join("");
        // Add Enter key functionality to radio buttons
        const inputs = container.querySelectorAll('input[name="ans"]');
        inputs.forEach((input) => {
          input.addEventListener("keydown", function (e) {
            if (e.key === "Enter") {
              this.checked = true;
              nextQuestion();
              e.stopPropagation();
            }
          });
        });
      }

      function nextQuestion() {
        // Check if an answer is selected
        const selectedAnswer = document.querySelector(
          'input[name="ans"]:checked'
        );
        if (!selectedAnswer) {
          alert("ูุฑุฌู ุงุฎุชูุงุฑ ุฅุฌุงุจุฉ");
          return;
        }
        // record answer
        const selectedIndex = Array.from(
          document.querySelectorAll('input[name="ans"]')
        ).indexOf(selectedAnswer);
        const q = currentQuestions[currentQuestionIndex];
        const axisKey =
          axes[currentAxisIndex].key +
          (currentLang ? "_" + currentLang : "") +
          (currentAxisKey && currentAxisKey !== axes[currentAxisIndex].key
            ? "_" + currentAxisKey
            : "");
        if (!userAnswers[axisKey]) userAnswers[axisKey] = [];
        userAnswers[axisKey].push({
          qIndex: currentQuestionIndex,
          selected: selectedIndex,
          correct: q.c,
        });
        currentQuestionIndex++;
        if (currentQuestionIndex < currentQuestions.length) {
          renderQuestion();
          return;
        }
        // finished current language/axis
        finishCurrent();
      }

      function finishCurrent() {
        // stop timer
        stopTimer();
        const axis = axes[currentAxisIndex];
        // if linguistic: mark this language done; if both done -> axis done and move next; else go back to lang select with remaining enabled
        if (axis.key === "linguistic") {
          axisLangDone.linguistic[currentLang] = true;
          // disable the language just finished (so user can't retake it)
          // if both done -> mark axis done -> proceed to break/next
          if (axisLangDone.linguistic.ar && axisLangDone.linguistic.en) {
            axisDone["linguistic"] = true;
            currentLang = null;
            currentAxisIndex++;
            currentSubAxisIndex = 0;
            startBreak();
          } else {
            currentLang = null;
            setupLanguageSelectForAxis("linguistic");
          }
          return;
        }

        // if tech: mark chosen language done and mark axis as fully done (user won't be returned to select other language)
        if (axis.key === "tech") {
          axisLangDone.tech[currentLang] = true;
          axisDone["tech"] = true;
          currentLang = null;
          currentAxisIndex++;
          currentSubAxisIndex = 0;
          startBreak();
          return;
        }

        // if axis has subAxes, move to next subAxis
        if (axis.subAxes && axis.subAxes.length > 0) {
          currentSubAxisIndex++;
          if (currentSubAxisIndex >= axis.subAxes.length) {
            // all subAxes done, mark axis done and move to next axis
            axisDone[axis.key] = true;
            currentAxisIndex++;
            currentSubAxisIndex = 0;
            startBreak();
          } else {
            // start next subAxis
            startAxis();
          }
          return;
        }

        // default axes
        axisDone[axis.key] = true;
        currentAxisIndex++;
        currentSubAxisIndex = 0;
        startBreak();
      }

      function startBreak() {
        if (currentAxisIndex >= axes.length) return showSection("endScreen");
        const axis = axes[currentAxisIndex];
        let nextLabel;
        let titleText;
        let count;
        if (
          axis.subAxes &&
          currentSubAxisIndex > 0 &&
          currentSubAxisIndex < axis.subAxes.length
        ) {
          // next is sub-axis
          nextLabel = axis.subAxes[currentSubAxisIndex].label;
          titleText = `ุงุณุชุนุฏ ููุงุฎุชุจุงุฑ ุงููุงุฏู: ${nextLabel}`;
          count = 2;
        } else {
          nextLabel = axis.label;
          titleText = `ุงุณุชุนุฏ ูููุญูุฑ ุงููุงุฏู: ${nextLabel}`;
          count = 5;
        }
        document.getElementById("nextAxisTitle").textContent = titleText;
        document.getElementById("countdown").textContent = count;
        showSection("breakScreen");
        breakInterval = setInterval(() => {
          count--;
          document.getElementById("countdown").textContent = count;
          if (count <= 0) {
            clearInterval(breakInterval);
            breakInterval = null;
            startAxis();
          }
        }, 1000);
      }

      function showResults() {
        const resultsDiv = document.getElementById("resultsContent");
        resultsDiv.innerHTML = "";

        axes.forEach((axis) => {
          const axisKey = axis.key;
          const userAxisAnswers = userAnswers[axisKey] || [];
          const total = userAxisAnswers.length;
          const correct = userAxisAnswers.filter(
            (a) => a.selected === a.correct
          ).length;
          const percent = total ? Math.round((correct / total) * 100) : 0;

          const card = document.createElement("div");
          card.className = "result-card";
          card.innerHTML = `
      <h3>${axis.label}</h3>
      <p>ุงูุฅุฌุงุจุงุช ุงูุตุญูุญุฉ: <span class="correct">${correct}</span> / ${total}</p>
      <div class="progress-bar">
        <div class="progress" style="width:${percent}%">${percent}%</div>
      </div>
      <p>${
        percent >= 80
          ? "ุฃุญุณูุช! ๐"
          : percent >= 50
          ? "ุฌูุฏ ๐"
          : "ุญุงูู ูุฑุฉ ุฃุฎุฑู ๐"
      }</p>
    `;
          resultsDiv.appendChild(card);
        });

        showSection("resultsScreen");
      }

      // start functions for buttons
      window.showSection = showSection;
      window.startExam = startExam;
      window.showResults = showResults;
      window.startFunctionalExam = function () {
        loadQuestionsForAxis("functional");
        showSection("examScreen");
      };
      window.startIqShapesExam = function () {
        loadQuestionsForAxis("iq_shapes");
        showSection("examScreen");
      };

      // Add Enter key functionality for next question
      document.addEventListener("keydown", function (event) {
        if (
          document.getElementById("examScreen").classList.contains("active") &&
          event.key === "Enter"
        ) {
          nextQuestion();
        }
      });
    </script>
  </body>
</html>
